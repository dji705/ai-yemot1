# yemot-router2

╫б╫д╫и╫Щ╫Ф ╫й╫Ю╫Р╫д╫й╫и╫к ╫Ь╫к╫Ы╫а╫к ╫Ю╫в╫и╫Ы╫Х╫к ╫Ш╫Ь╫д╫Х╫а╫Щ╫Х╫к ╫С╫з╫Ь╫Х╫к ╫С╫Р╫Ю╫ж╫в╫Х╫к [╫Ю╫Х╫У╫Х╫Ь API](https://f2.freeivr.co.il/post/76) ╫й╫Ь ╫Ч╫С╫и╫к '╫Щ╫Ю╫Х╫к ╫Ф╫Ю╫й╫Щ╫Ч' ╫в╫Э ╫Ч╫Щ╫У╫Х╫й╫Щ╫Э ╫Ы╫Т╫Х╫Я tts ╫Ю╫Х╫Ь OpenAI. ╫Ф╫Ч╫С╫Щ╫Ь╫Ф ╫й╫Х╫Ы╫д╫Ь╫Ф ╫в╫Ь ╫д╫Щ https://github.com/ShlomoCode/yemot-router2 ╫Х╫в╫Ь ╫Ы╫Ъ ╫к╫Х╫У╫к╫а╫Х ╫Ь╫Ф╫Э.

╫Ю╫Ш╫и╫к ╫Ф╫б╫д╫и╫Щ╫Ф ╫Ь╫Р╫д╫й╫и ╫к╫з╫й╫Х╫и╫к ╫Ю╫Х╫Ь ╫Ф╫Ю╫в╫и╫Ы╫к ╫Ф╫Ш╫Ь╫д╫Х╫а╫Щ╫к ╫С╫ж╫Х╫и╫Ф ╫а╫з╫Щ╫Ф ╫Х╫з╫и╫Щ╫Р╫Ф:

- ╫Ф╫и╫ж╫Ф ╫и╫ж╫Щ╫д╫Ф ╫й╫Ь ╫Ф╫з╫Х╫У ╫Ю╫к╫Ч╫Щ╫Ь╫Ф ╫Х╫в╫У ╫б╫Х╫г, ╫к╫Х╫Ъ ╫й╫Ю╫Щ╫и╫к ╫Фstate ╫й╫Ь ╫Ф╫й╫Щ╫Ч╫Ф ╫С╫Щ╫Я ╫Ф╫з╫и╫Щ╫Р╫Х╫к, ╫С╫ж╫Х╫и╫Ф ╫й╫з╫Х╫д╫Ф ╫Ь╫Ч╫Ь╫Х╫Ш╫Щ╫Я
- ╫Щ╫ж╫Щ╫и╫к ╫Ф╫к╫й╫Х╫С╫Х╫к ╫в╫Ь ╫Щ╫У╫Щ ╫з╫и╫Щ╫Р╫Ф ╫Ь╫Ю╫к╫Х╫У╫Х╫к ╫й╫Ь ╫Ф╫й╫Щ╫Ч╫Ф ╫С╫Ю╫з╫Х╫Э ╫Щ╫ж╫Щ╫и╫Ф ╫Щ╫У╫а╫Щ╫к ╫й╫Ь ╫Ф╫б╫Ш╫и╫Щ╫а╫Т╫Щ╫Э
- ╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫а╫Х╫Ч╫Х╫к ╫а╫Х╫б╫д╫Х╫к ╫Ы╫Т╫Х╫Я ╫Ю╫Ш╫д╫Ь ╫С╫й╫Т╫Щ╫Р╫Х╫к, ╫Ф╫б╫и╫Ф ╫й╫Ь ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э, ╫Ь╫Х╫Т ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ ╫Ю╫д╫Х╫и╫Ш (╫Р╫Х╫д╫ж╫Щ╫Х╫а╫Ь╫Щ)
- ╫к╫Щ╫в╫Х╫У ╫Ю╫д╫Х╫и╫Ш ╫Ю╫Х╫Ш╫Ю╫в ╫Х╫Ю╫Х╫ж╫Т ╫к╫Х╫Ъ ╫Ы╫У╫Щ ╫в╫и╫Щ╫Ы╫Ф тАл(JSDoc)
- [╫к╫Ю╫Щ╫Ы╫Ф ╫СTypeScript](#typescript)
- ╫Х╫в╫Х╫У ╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫и╫С╫Х╫к! ╫д╫Щ╫и╫Х╫Ш ╫С╫к╫Щ╫в╫Х╫У ЁЯСЗ

# ╫Ф╫к╫з╫а╫Ф

```bash
npm install yemot-router2-new
```

# ╫Щ╫Х╫Ю╫Я ╫й╫Щ╫а╫Х╫Щ╫Щ╫Э/╫Ф╫Х╫и╫Р╫Х╫к ╫й╫У╫и╫Х╫Т

тЪЩя╕П ╫Ю╫й╫У╫и╫Т╫Щ╫Э ╫Ю╫Т╫и╫б╫Ф ╫з╫Х╫У╫Ю╫к? ╫и╫Р╫Х [changelog](./CHANGELOG.md)!

# ╫к╫Щ╫в╫Х╫У

╫Ю╫Х╫Ю╫Ь╫е ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫Ы╫д╫к╫Х╫и "╫к╫Х╫Ы╫Я ╫Ф╫в╫а╫Щ╫Щ╫а╫Щ╫Э" ╫Ф╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ ╫Ы╫У╫Щ ╫Ь╫а╫Х╫Х╫Ш ╫С╫к╫Щ╫в╫Х╫У:
![CleanShot 2023-05-02 at 04 14 20@2x](https://user-images.githubusercontent.com/78599753/235558893-e8b9ebe0-e2a1-4740-8c96-eb370f9a3952.png)

# ╫Р╫к╫Ч╫Х╫Ь ╫Ф╫и╫Р╫Х╫Ш╫и ╫Х╫й╫Щ╫Ю╫Х╫й ╫С╫б╫Щ╫б╫Щ

╫Ф╫б╫д╫и╫Щ╫Ф ╫в╫Х╫С╫У╫к ╫в╫Ь ╫Щ╫У╫Щ ╫Ч╫Щ╫з╫Х╫Щ ╫й╫Ь Express Router, ╫Ы╫Ъ ╫й╫Р╫Х╫д╫Я ╫Ф╫й╫Щ╫Ю╫Х╫й ╫Ф╫Х╫Р ╫У╫Щ ╫У╫Х╫Ю╫Ф. ╫У╫Х╫Т╫Ю╫Ф:

```js
import { YemotRouter } from 'yemot-router2';
const router = YemotRouter();

router.get('/', async (call) => {
    return call.id_list_message([{
        type: 'text',
        data: '╫й╫Ь╫Х╫Э ╫в╫Х╫Ь╫Э'
    }])
});
```

╫Р╫Х ╫С╫й╫С╫Щ╫Ь ╫Ф╫з╫и╫Р╫к AI
```js
import { YemotRouter } from 'yemot-router2';
const router = YemotRouter({
    printLog: true,
    tokenYemot: process.env.TOKEN_YEMOT,
    // aiTTSPath: 'ivr/1',
    openaiApiKey: process.env.OPENAI_API_KEY
});

router.get('/', async (call) => {
    return call.id_list_message([{
        type: 'ai',
        data: '╫й╫Ь╫Х╫Э ╫в╫Х╫Ь╫Э'
    }])
});
```

╫Р╫к ╫Ф╫и╫Р╫Х╫Ш╫и ╫Щ╫й ╫Ь╫Ч╫С╫и ╫Ь╫Р╫д╫Ь╫Щ╫з╫ж╫Щ╫Щ╫к express ╫в╫Ь ╫Щ╫У╫Щ `app.use`, ╫Ы╫и╫Т╫Щ╫Ь.

╫Ф╫и╫Р╫Х╫Ш╫и ╫Ю╫з╫С╫Ь ╫д╫Х╫а╫з╫ж╫Щ╫Щ╫Ф ╫Р╫б╫Щ╫а╫Ы╫и╫Х╫а╫Щ╫к, ╫й╫Ф╫Р╫и╫Т╫Х╫Ю╫а╫Ш ╫й╫Ф╫Щ╫Р ╫Ю╫з╫С╫Ь╫к ╫Ю╫Ф╫и╫Р╫Х╫Ш╫и ╫Ф╫Х╫Р ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш `Call` (╫Щ╫С╫Х╫Р╫и ╫С╫Ф╫Ю╫й╫Ъ), ╫Ф╫Ю╫Щ╫Щ╫ж╫Т ╫Р╫к ╫Ф╫й╫Щ╫Ч╫Ф, ╫Х╫С╫Р╫Ю╫ж╫в╫Х╫к ╫Ф╫Ю╫к╫Х╫У╫Х╫к ╫й╫Ь╫Х ╫а╫Щ╫к╫Я ╫Ь╫з╫С╫Ь ╫Ю╫Щ╫У╫в ╫Р╫Х╫У╫Х╫к ╫Ф╫й╫Щ╫Ч╫Ф, ╫Ь╫Ф╫й╫Ю╫Щ╫в/╫Ь╫С╫з╫й ╫а╫к╫Х╫а╫Щ╫Э ╫Ю╫Ф╫Ю╫Ч╫Щ╫Щ╫Т, ╫Ь╫Ф╫д╫а╫Х╫к ╫Р╫Х╫к╫Х ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Р╫Ч╫и╫к, ╫Х╫в╫Х╫У.

**ЁЯСитАНЁЯТ╗ ╫У╫Х╫Т╫Ю╫Ф ╫С╫б╫Щ╫б╫Щ╫к: [example.js](example.js)**

**╫Ш╫Щ╫д**: ╫Ю╫Х╫Ю╫Ь╫е ╫Ю╫Р╫Х╫У ╫Ь╫Р ╫Ь╫Ф╫Т╫У╫Щ╫и ╫С╫й╫Ь╫Х╫Ч╫Ф `api_hangup_send=no`, ╫Ь╫С╫Щ╫ж╫Х╫в╫Щ ╫Ц╫Щ╫Ы╫и╫Х╫Я ╫Ш╫Х╫С╫Щ╫Э ╫Щ╫Х╫к╫и.

## ╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫Ф╫и╫Р╫Х╫Ш╫и

╫Ф╫и╫Р╫Х╫Ш╫и ╫Ю╫з╫С╫Ь ╫Р╫к ╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Х╫к ╫Ф╫С╫Р╫Х╫к, ╫Ы╫Х╫Ь╫Я ╫Р╫Х╫д╫ж╫Щ╫Х╫а╫Ь╫Щ╫Х╫к:

- **timeout**: тАл ╫Ц╫Ю╫Я ╫Ф╫Ю╫к╫а╫Ф ╫Ь╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ф╫Ю╫й╫к╫Ю╫й (╫С╫Ю╫Щ╫Ь╫Щ╫й╫а╫Щ╫Х╫к). ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ь╫Р ╫Ф╫к╫з╫С╫Ь ╫Ф╫а╫к╫Х╫Я ╫С╫Ц╫Ю╫Я ╫Ф╫а"╫Ь, ╫Ф╫й╫Щ╫Ч╫Ф ╫к╫Щ╫Ю╫Ч╫з ╫Ю╫ФactiveCalls ╫Х╫Т╫Э ╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫з╫Щ╫й ╫Ф╫й╫и╫к ╫Щ╫з╫С╫Ь ╫Р╫Х╫к╫Х ╫Ы╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф.<br>
тАл╫Ю╫з╫С╫Ь ╫Ю╫б╫д╫и ╫Ю╫Щ╫Ь╫Щ╫й╫Щ╫а╫Щ╫Х╫к, ╫Р╫Х ╫Ю╫Ч╫и╫Х╫Ц╫к ╫Ф╫з╫С╫Щ╫Ь╫Ф ╫в"╫Щ ╫б╫д╫и╫Щ╫Щ╫к [╫б╫д╫и╫Щ╫Щ╫к ms](https://npmjs.com/ms).<br>
тАл╫Ю╫Ы╫б╫Ф ╫Т╫Э ╫Ю╫з╫и╫Щ ╫з╫ж╫Ф ╫й╫Ь╫Р ╫Ф╫к╫з╫С╫Ь╫Ф ╫Ю╫Щ╫Ю╫Х╫к ╫Ф╫з╫и╫Щ╫Р╫Ф ╫в╫Э hangup=yes.<br>
тАл╫Щ╫й ╫Ь╫й╫Щ╫Э ╫Ь╫С ╫Ь╫Р ╫Ь╫Ф╫Т╫У╫Щ╫и ╫в╫и╫Ъ ╫а╫Ю╫Х╫Ъ ╫й╫Ю╫Ч╫Щ╫Щ╫Т ╫Ь╫Т╫Щ╫Ш╫Щ╫Ю╫Щ ╫й╫Ь╫Р ╫Ф╫з╫Щ╫й ╫Ю╫Щ╫У ╫к╫й╫Х╫С╫Ф ╫в╫Ь╫Х╫Ь ╫Ь╫Ф╫Щ╫к╫з╫Ь ╫С-timeout.
- **printLog** (╫С╫Х╫Ь╫Щ╫Р╫а╫Щ): ╫Ф╫Р╫Э ╫Ь╫Ф╫У╫д╫Щ╫б ╫Ь╫Х╫Т ╫Ю╫д╫Х╫и╫Ш ╫в╫Ь ╫Ы╫Ь ╫з╫и╫Щ╫Р╫Ф ╫Ь╫й╫и╫к, ╫а╫Щ╫к╫Х╫з ╫й╫Щ╫Ч╫Ф ╫Х╫Ы╫Х╫Ь╫Щ. ╫й╫Щ╫Ю╫Х╫й╫Щ ╫Ь╫д╫Щ╫к╫Х╫Ч.
- **uncaughtErrorHandler**: (╫д╫Х╫а╫з╫ж╫Щ╫Ф) тАл ╫д╫Х╫а╫з╫ж╫Щ╫Ф ╫Ь╫Ш╫Щ╫д╫Х╫Ь ╫С╫й╫Т╫Щ╫Р╫Х╫к ╫Ь╫Р ╫Ю╫Ш╫Х╫д╫Ь╫Х╫к ╫С╫к╫Х╫Ъ ╫й╫Щ╫Ч╫Ф, ╫й╫Щ╫Ю╫Х╫й╫Щ ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ь╫й╫Ю╫Щ╫и╫к ╫Ь╫Х╫Т + ╫Ф╫й╫Ю╫в╫к ╫Ф╫Х╫У╫в╫Ф ╫Ь╫Ю╫й╫к╫Ю╫й, ╫С╫Ю╫з╫Х╫Э ╫з╫и╫Щ╫б╫Ф ╫й╫Ь ╫Ф╫й╫и╫к, ╫Х╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫й╫Ю╫в "╫Р╫Щ╫Я ╫Ю╫в╫а╫Ф ╫Ю╫й╫и╫к API".
╫и╫Р╫Ф ╫У╫Х╫Т╫Ю╫Ф ╫С[example.js](example.js).

╫С╫а╫Х╫б╫г ╫а╫Щ╫к╫Я ╫Ь╫Ф╫в╫С╫Щ╫и ╫Р╫Х╫д╫ж╫Щ╫Х╫к ╫й╫Ь ╫Р╫з╫б╫д╫и╫б ╫и╫Р╫Х╫Ш╫и ╫в╫ж╫Ю╫Х - ╫и╫Р╫Ф [╫д╫Щ╫и╫Х╫Ш ╫С╫к╫Щ╫в╫Х╫У express.js](https://expressjs.com/en/api.html#express.router).

# ╫Ю╫к╫Х╫У╫Х╫к ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш ╫Ф`Call`

## `read(messages, mode, options?)`

╫Ю╫к╫Х╫У╫Ф ╫Ь╫з╫С╫Ь╫к ╫а╫к╫Х╫Я ╫Ю╫Ф╫Ю╫Ч╫Щ╫Щ╫Т, ╫Ю╫Ч╫Ц╫Щ╫и╫Ф `Promise` ╫в╫Э ╫Ф╫к╫й╫Х╫С╫Ф (╫С╫Ю╫з╫и╫Ф ╫й╫Ь ╫С╫з╫й╫к ╫Ф╫з╫Ь╫Ш╫Ф, ╫Щ╫Ч╫Ц╫Х╫и ╫а╫к╫Щ╫С ╫Ф╫з╫Х╫С╫е).<br>
╫д╫Щ╫и╫Х╫Ш ╫а╫Х╫б╫г ╫в╫Ь `read`: [https://f2.freeivr.co.il/post/78283](https://f2.freeivr.co.il/post/78283)

### ╫Ф╫Р╫и╫Т╫Х╫Ю╫а╫Ш `messages`

╫Ф╫Ф╫Х╫У╫в╫Х╫к ╫й╫Щ╫Х╫й╫Ю╫в╫Х ╫Ь╫Ю╫Ч╫Щ╫Щ╫Т ╫Ь╫д╫а╫Щ ╫з╫С╫Ь╫к ╫Ф╫а╫к╫Х╫Я.<br>
╫Ю╫в╫и╫Ъ ╫й╫Ь ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш╫Щ "╫Ф╫Х╫У╫в╫Ф" (╫и╫Р╫Ф [╫д╫Щ╫и╫Х╫Ш ╫С╫Ф╫Ю╫й╫Ъ](#╫Р╫Х╫С╫Щ╫Щ╫з╫Ш-message)), ╫й╫Щ╫Х╫й╫Ю╫в╫Х ╫Ь╫Ю╫й╫к╫Ю╫й ╫С╫и╫ж╫г.

### ╫Ф╫Р╫и╫Т╫Х╫Ю╫а╫Ш `mode`

╫Ю╫Т╫У╫Щ╫и ╫Р╫к ╫б╫Х╫Т ╫Ф╫а╫к╫Х╫Я ╫й╫Ю╫С╫з╫й╫Щ╫Э ╫Ю╫Ф╫Ю╫Ч╫Щ╫Щ╫Т:

`tap` = ╫Ф╫з╫й╫Х╫к

`stt` = ╫Ц╫Щ╫Ф╫Х╫Щ ╫У╫Щ╫С╫Х╫и

`record` = ╫Ф╫з╫Ь╫Ш╫Ф

### ╫Ф╫Р╫и╫Т╫Х╫Ю╫а╫Ш `options`

╫С╫д╫и╫Ю╫Ш╫и ╫Ф╫Ц╫Ф, ╫а╫Щ╫к╫Я ╫Ь╫Ф╫в╫С╫Щ╫и ╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫а╫Х╫б╫д╫Х╫к, ╫Ы╫Т╫Х╫Я ╫б╫Ъ ╫Ф╫з╫й╫Х╫к ╫Ю╫Щ╫а╫Щ╫Ю╫Ь╫Щ, ╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ, ╫Х╫Ы╫Х'.

#### ╫Ф╫з╫й╫Х╫к

```js
let options = {
    /* ╫й╫Э ╫Ф╫в╫и╫Ъ ╫С╫Щ╫Ю╫Х╫к
    ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь, ╫а╫з╫С╫в ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к,
    val_1, val_2, val_3 ...
    */
    val_name: "val_x",
    
    /* ╫Ф╫Р╫Э ╫Ь╫С╫з╫й ╫Р╫к ╫Ф╫в╫и╫Ъ ╫й╫Х╫С ╫Р╫Э ╫з╫Щ╫Щ╫Э. */
    re_enter_if_exists: false,
    
    /* ╫Ы╫Ю╫Х╫к ╫Ф╫б╫д╫и╫Х╫к ╫Ф╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ╫к ╫й╫Ф╫Ю╫й╫к╫Ю╫й ╫Щ╫Х╫Ы╫Ь ╫Ь╫Ф╫з╫Щ╫й */
    max_digits: "*",
    
    /* ╫Ы╫Ю╫Х╫к ╫б╫д╫и╫Х╫к ╫Ю╫Щ╫а╫Щ╫Ю╫Ь╫Щ╫к */
    min_digits: 1,
    
    /* ╫й╫а╫Щ╫Х╫к ╫Ь╫Ф╫Ю╫к╫а╫Ф */
    sec_wait: 7,
    
    /* ╫ж╫Х╫и╫к ╫Ф╫Ф╫й╫Ю╫в╫Ф ╫Ь╫Ю╫й╫к╫Ю╫й ╫Р╫к ╫Ф╫з╫й╫Х╫к╫Щ╫Х
    ╫С╫Р╫Э ╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫С╫Ю╫з╫Ь╫У╫к ╫й╫Х╫а╫Ф ╫Ю╫Ю╫з╫Ь╫У╫к ╫б╫д╫и╫Х╫к, ╫Ы╫Т╫Х╫Я EmailKeyboard ╫Р╫Х HebrewKeyboard, ╫Щ╫й ╫Ь╫Ф╫Ы╫а╫Щ╫б ╫Ы╫Р╫Я ╫Р╫к ╫б╫Х╫Т ╫Ф╫Ю╫з╫Ь╫У╫к
    [╫и╫Р╫Х example.js]
    ╫Ф╫Р╫Х╫д╫ж╫Щ╫Х╫к ╫Ф╫з╫Щ╫Щ╫Ю╫Х╫к:
    "Number" | "Digits" | "File" | "TTS" | "Alpha" | "No" | "HebrewKeyboard" |
    "EmailKeyboard" | "EnglishKeyboard" | "DigitsKeyboard" | "TeudatZehut" |
    "Price" | "Time" | "Phone" | "No"
    ╫д╫Щ╫и╫Х╫Ш ╫в╫Ь ╫Ы╫Ь ╫Р╫Х╫д╫ж╫Щ╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ю╫ж╫Х╫Р ╫С╫к╫Щ╫в╫Х╫У ╫Ю╫Х╫У╫Х╫Ь API ╫й╫Ь ╫Щ╫Ю╫Х╫к ╫Ф╫Ю╫й╫Щ╫Ч, ╫к╫Ч╫к"╫Ф╫в╫и╫Ъ ╫Ф╫й╫Щ╫й╫Щ (╫Ф╫з╫й╫Ф)".
    */
    
    typing_playback_mode: "No",
    
    /* ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫Ф╫з╫й╫Ф ╫в╫Ь ╫Ы╫Х╫Ы╫С╫Щ╫к */
    block_asterisk_key: false,
    
    /* ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫Ф╫з╫й╫Ф ╫в╫Ь ╫Р╫д╫б */
    block_zero_key: false,
    
    /* ╫Ф╫Ч╫Ь╫д╫к ╫к╫Х╫Х╫Щ╫Э*/
    replace_char: "",
    
    /* ╫б╫д╫и╫Х╫к ╫Ю╫Х╫к╫и╫Х╫к ╫Ь╫Ф╫з╫й╫Ф - ╫Ю╫в╫и╫Ъ
    [1, 2, 3 ...]
    */
    digits_allowed: [],
    
    /* ╫Ы╫Ю╫Ф ╫д╫в╫Ю╫Щ╫Э ╫Ь╫Ф╫й╫Ю╫Щ╫в ╫Р╫к ╫Ф╫й╫Р╫Ь╫Ф ╫Ь╫д╫а╫Щ ╫й╫Ь╫Щ╫Ч╫к ╫к╫й╫Х╫С╫к "None" (╫Ы╫Ь╫Х╫Ю╫и ╫к╫й╫Х╫С╫Ф ╫и╫Щ╫з╫Ф). ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫д╫в╫Э ╫Р╫Ч╫к */
    amount_attempts: "",
    
    /*
    ╫Ф╫Р╫Э ╫Ь╫Р╫д╫й╫и ╫к╫й╫Х╫С╫Ф ╫и╫Щ╫з╫Ф - ╫Р╫Х ╫й╫Ь╫Р╫Ч╫и ╫Ц╫Ю╫Я ╫Ф╫Ф╫Ю╫к╫а╫Ф ╫Щ╫Х╫й╫Ю╫в "╫Ь╫Р ╫Ф╫Х╫з╫й╫Ф ╫С╫Ч╫Щ╫и╫Ф" ╫Х╫Щ╫У╫и╫Х╫й ╫Ь╫Ф╫з╫Щ╫й
    ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ь╫Р ╫Ю╫Р╫д╫й╫и ╫к╫й╫Х╫С╫Ф ╫и╫Щ╫з╫Ф
    */
    allow_empty: false,
    
    /*
    ╫Ф╫в╫и╫Ъ ╫й╫Щ╫Щ╫й╫Ь╫Ч ╫Ы╫й╫Ь╫Р ╫Ф╫Х╫з╫й╫Ф ╫к╫й╫Х╫С╫Ф. ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь "None"
    ╫а╫Щ╫к╫Я ╫Ь╫Ф╫в╫С╫Щ╫и ╫Т╫Э ╫в╫и╫Ы╫Щ╫Э ╫й╫Р╫Щ╫а╫Э ╫Ю╫Ч╫и╫Х╫Ц╫к, ╫Ь╫У╫Х╫Т╫Ю╫Ф null ╫Х╫Ф╫в╫и╫Ъ ╫й╫Щ╫к╫з╫С╫Ь ╫Ю╫Фread ╫Щ╫Ф╫Щ╫Ф null ╫Х╫Ь╫Р 'null'
    */
    empty_val: "None",
    
    /* ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫й╫Щ╫а╫Х╫Щ ╫й╫д╫к ╫Ю╫з╫Ь╫У╫к */
    block_change_keyboard: false,
}
```

#### ╫Ф╫з╫Ь╫Ш╫Ф

╫в╫и╫Ы╫Щ ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫Ф╫з╫Ь╫Ш╫Х╫к:

```js
const options = {
    /* ╫а╫к╫Щ╫С ╫Ь╫й╫Ю╫Щ╫и╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф - ╫й╫Ь╫Х╫Ч╫Ф ╫С╫Ь╫С╫У, ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫й╫Ь╫Х╫Ч╫Ф ╫а╫Х╫Ы╫Ч╫Щ╫к, ╫Р╫Х api_dir ╫Р╫Э ╫Ю╫Х╫Т╫У╫и */
    path: '',

    /* ╫й╫Э ╫з╫Х╫С╫е (╫Ь╫Ь╫Р ╫б╫Щ╫Х╫Ю╫к) ╫Ь╫й╫Ю╫Щ╫и╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф, ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫Ю╫Ю╫Х╫б╫д╫и ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫Ы╫з╫Х╫С╫е ╫Ф╫Т╫С╫Х╫Ф ╫С╫й╫Ь╫Х╫Ч╫Ф */
    file_name: '',

    /*
    ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ю╫й╫Ю╫Щ╫в ╫к╫д╫и╫Щ╫Ш ╫Ь╫Р╫Щ╫й╫Х╫и ╫Ф╫Ф╫з╫Ь╫Ш╫Ф/╫Ф╫з╫Ь╫Ш╫Ф ╫Ю╫Ч╫У╫й, ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫й╫Ю╫Щ╫У ╫С╫Ф╫з╫й╫Ф ╫в╫Ь ╫б╫Х╫Ь╫Ю╫Щ╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф ╫к╫Р╫Х╫й╫и
    */
    no_confirm_menu: false,

    /* ╫Ф╫Р╫Э ╫Ь╫й╫Ю╫Х╫и ╫Р╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф ╫С╫Р╫Э ╫Ф╫Ю╫й╫к╫Ю╫й ╫а╫Щ╫к╫з ╫С╫Р╫Ю╫ж╫в ╫Ф╫з╫Ь╫Ш╫Ф */
    save_on_hangup: false,

    /*
    ╫С╫Ю╫Щ╫У╫Ф ╫Х╫Ф╫Х╫Т╫У╫и ╫й╫Э ╫з╫Х╫С╫е ╫Ь╫й╫Ю╫Щ╫и╫Ф (file_name) ╫Х╫Ы╫С╫и ╫з╫Щ╫Щ╫Э ╫з╫Х╫С╫е ╫Ы╫Ц╫Ф,
    ╫Ф╫Р╫Э ╫Ь╫й╫а╫Х╫к ╫Р╫к ╫й╫Э ╫Ф╫з╫Х╫С╫е ╫Ф╫Щ╫й╫Я ╫Х╫Ь╫й╫Ю╫Х╫и ╫Р╫к ╫Ф╫Ч╫У╫й ╫С╫й╫Э ╫й╫а╫С╫Ч╫и (╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь), ╫Р╫Х ╫Ь╫ж╫и╫г ╫Р╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф ╫Ф╫Ч╫У╫й╫Ф ╫Ь╫б╫Х╫г ╫Ф╫з╫Х╫С╫е ╫Ф╫Щ╫й╫Я
    */
    append_to_existing_file: false,

    /* ╫Ы╫Ю╫Х╫к ╫й╫а╫Щ╫Х╫к ╫Ю╫Щ╫а╫Щ╫Ю╫Ь╫Щ╫к ╫Ь╫Ф╫з╫Ь╫Ш╫Ф, ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Р╫Щ╫Я ╫Ю╫Щ╫а╫Щ╫Ю╫Х╫Э */
    min_length: '',

    /* ╫Ы╫Ю╫Х╫к ╫й╫а╫Щ╫Х╫к ╫Ю╫з╫б╫Щ╫Ю╫Ь╫Щ╫к ╫Ь╫Ф╫з╫Ь╫Ш╫Ф, ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ь╫Ь╫Р ╫Ф╫Т╫С╫Ь╫Ф */
    max_length: ''
};
```

#### ╫Ц╫Щ╫Ф╫Х╫Щ ╫У╫Щ╫С╫Х╫и

╫в╫и╫Ы╫Щ ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь - ╫Ц╫Щ╫Ф╫Х╫Щ ╫У╫Щ╫С╫Х╫и:

```js
const options = {
    /*
    ╫й╫д╫к ╫Ф╫У╫Щ╫С╫Х╫и
    ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫в╫С╫и╫Щ╫к ╫Р╫Х ╫Ю╫Ф ╫й╫Ф╫Х╫Т╫У╫и ╫Сlang ╫С╫й╫Ь╫Х╫Ч╫Ф,
    ╫и╫й╫Щ╫Ю╫к ╫Ф╫й╫д╫Х╫к ╫Ф╫Ц╫Ю╫Щ╫а╫Х╫к ╫Ь╫Ф╫Т╫У╫и╫Ф: https://did.li/m1lrl
    */
    lang: '',

    /*
    ╫Ф╫Р╫Э ╫Ь╫Ч╫б╫Х╫Э ╫Ф╫з╫й╫Ф ╫С╫Ю╫ж╫С ╫Ц╫Щ╫Ф╫Х╫Щ ╫У╫Щ╫С╫Х╫и
    ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ю╫Р╫д╫й╫и ╫Ь╫Ф╫з╫Щ╫й ╫к╫Х╫Ъ ╫Ы╫У╫Щ ╫Ф╫У╫Щ╫С╫Х╫и, ╫Ы╫Ь╫Х╫Ю╫и ╫Ф╫Ю╫Ч╫Щ╫Щ╫Т ╫С╫Х╫Ч╫и ╫Р╫Э ╫Ь╫Ф╫з╫Щ╫й ╫Р╫Х ╫Ь╫У╫С╫и
    */
    block_typing: false,

    /*
    ╫Ю╫з╫б╫Щ╫Ю╫Х╫Э ╫б╫д╫и╫Х╫к ╫й╫Р╫д╫й╫и ╫Ь╫Ф╫з╫Щ╫й, ╫С╫Р╫Э ╫Ь╫Р ╫а╫Ч╫б╫Ю╫Ф ╫Ф╫Ф╫з╫й╫Ф ╫к╫Х╫Ъ ╫Ы╫У╫Щ ╫У╫Щ╫С╫Х╫и
    ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь ╫Ь╫Р ╫Ю╫Х╫Т╫С╫Ь
    */
    max_digits: '',

    /*
    ╫Ф╫Р╫Э ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫Ю╫а╫Х╫в ╫Ф╫У╫Щ╫С╫Х╫и ╫й╫Ь ╫Ф╫з╫Ь╫Ш╫Х╫к - ╫а╫ж╫и╫Ъ ╫в╫С╫Х╫и ╫Ц╫Щ╫Ф╫Х╫Щ ╫Ш╫з╫б╫Ш ╫Р╫и╫Х╫Ъ
    ╫С╫Р╫Э ╫Ю╫д╫в╫Щ╫Ь╫Щ╫Э ╫Ф╫Т╫У╫и╫Ф ╫Ц╫Х, ╫Ь╫Р ╫а╫Щ╫к╫Я ╫Ь╫з╫Ь╫Х╫Ш ╫Ф╫з╫й╫Х╫к ╫к╫Х╫Ъ ╫Ы╫У╫Щ ╫У╫Щ╫С╫Х╫и
    */
    use_records_recognition_engine: false,

    /*
    ╫Р╫Ч╫и╫Щ ╫Ы╫Ю╫Ф ╫й╫а╫Щ╫Х╫к ╫й╫Ь ╫й╫з╫Ш ╫Ь╫б╫Щ╫Щ╫Э ╫Р╫к ╫Ф╫Ф╫з╫Ь╫Ш╫Ф,
    ╫и╫Ь╫Х╫Х╫а╫Ш╫Щ ╫и╫з ╫Р╫Э ╫Ю╫й╫к╫Ю╫й╫Щ╫Э ╫С╫Ю╫а╫Х╫в ╫Ц╫Щ╫Ф╫Х╫Щ ╫Ш╫з╫б╫Ш╫Щ╫Э ╫Р╫и╫Х╫Ы╫Щ╫Э (use_records_recognition_engine)
    */
    quiet_max: '',

    /*
    * ╫Ю╫б╫д╫и ╫й╫а╫Щ╫Х╫к ╫Ю╫и╫С╫Щ ╫Ь╫Ф╫з╫Ь╫Ш╫Ф, ╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: ╫Ь╫Ь╫Р ╫Ф╫Т╫С╫Ь╫Ф
    */
    length_max: ''
};
```

## `go_to_folder(target)`

╫Ю╫к╫Х╫У╫Ф ╫Ь╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ю╫б╫Х╫Щ╫Ю╫к ╫С╫Ю╫в╫и╫Ы╫к ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к.

╫а╫Щ╫к╫Я ╫Ь╫Ы╫к╫Х╫С ╫а╫к╫Щ╫С ╫Щ╫Ч╫б╫Щ ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к ╫Р╫Х ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫и╫Р╫й╫Щ╫к, ╫д╫Щ╫и╫Х╫Ш ╫в╫Ь ╫Ф╫Р╫Х╫д╫ж╫Щ╫Х╫к ╫Ф╫Ц╫Ю╫Щ╫а╫Х╫к ╫а╫Щ╫к╫Я ╫Ь╫з╫и╫Х╫Р [╫Ы╫Р╫Я](https://f2.freeivr.co.il/post/58).

╫а╫Щ╫к╫Я ╫Т╫Э ╫Ь╫Ф╫в╫С╫Щ╫и ╫С╫д╫и╫Ю╫Ш╫и folder ╫Р╫к ╫Ф╫б╫Ш╫и╫Щ╫а╫Т `hangup`, ╫Х╫Ы╫Ъ ╫Ь╫а╫к╫з ╫Р╫к ╫Ф╫й╫Щ╫Ч╫Ф, ╫Р╫Х ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫з╫Щ╫ж╫Х╫и [`call.hangup()`](#hangup).

## `restart_ext()`

╫Ф╫д╫в╫Ь╫Ф ╫Ю╫Ч╫У╫й ╫й╫Ь ╫Ф╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к.

╫з╫Щ╫ж╫Х╫и ╫Ь╫к╫Ч╫С╫Щ╫и ╫Ф╫С╫Р:

```js
call.go_to_folder(`/${call.ApiExtension}`);
```

## `hangup()`

╫а╫Щ╫к╫Х╫з ╫Ф╫й╫Щ╫Ч╫Ф. ╫з╫Щ╫ж╫Х╫и ╫Ь╫к╫Ч╫С╫Щ╫и ╫Ф╫С╫Р:

```js
call.go_to_folder('hangup');
```

## `id_list_message(messages, options?)`

╫С╫Ю╫к╫Х╫У╫Ф ╫Ц╫Х ╫а╫Щ╫к╫Я ╫Ь╫Ф╫й╫Ю╫Щ╫в ╫Ь╫Ю╫й╫к╫Ю╫й ╫Ф╫Х╫У╫в╫Ф ╫Р╫Ч╫к, ╫Р╫Х ╫Ю╫б╫д╫и ╫Ф╫Х╫У╫в╫Х╫к ╫С╫и╫ж╫г.<br>
╫Ф╫Ю╫к╫Х╫У╫Ф ╫Ю╫з╫С╫Ь╫к ╫Ю╫в╫и╫Ъ ╫й╫Ь ╫Ф╫Х╫У╫в╫Х╫к ([╫Р╫Х╫С╫Щ╫Щ╫з╫Ш message](#╫Р╫Х╫С╫Щ╫Щ╫з╫Ш-message)) ╫Х╫Ю╫й╫Ю╫Щ╫в╫Ф ╫Р╫Х╫к╫Я ╫Ь╫Ю╫й╫к╫Ю╫й.

тЪая╕П ╫й╫Щ╫Э ╫Ь╫С! тЪая╕П

╫Ь╫Р╫Ч╫и ╫Ф╫й╫Ю╫в╫к ╫Ф╫Ф╫Х╫У╫в╫Х╫к, ╫Ф╫й╫Щ╫Ч╫Ф ╫к╫ж╫Р ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫Ю╫Ф╫й╫Ь╫Х╫Ч╫Ф!

╫С╫Р╫Э ╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫Ь╫й╫и╫й╫и ╫д╫в╫Х╫Ь╫Ф ╫а╫Х╫б╫д╫к ╫Ь╫Р╫Ч╫и ╫Ф╫Ф╫й╫Ю╫в╫Ф, ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ь╫Ф╫й╫Ю╫Щ╫в ╫Ф╫Х╫У╫в╫Ф ╫Х╫Р╫Ц ╫Ь╫С╫ж╫в `read` (╫з╫С╫Ь╫к ╫а╫к╫Х╫а╫Щ╫Э ╫а╫Х╫б╫д╫Щ╫Э), ╫Щ╫й ╫Ь╫Ф╫Т╫У╫Щ╫и ╫С╫Р╫и╫Т╫Х╫Ю╫а╫Ш ╫Ф`options` ╫Р╫к `prependToNextAction` ╫Ь`true`.

</div>

## `routing_yemot(number)`

╫Ю╫к╫Х╫У╫Ф ╫Ь╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ь╫Ю╫в╫и╫Ы╫к ╫Р╫Ч╫и╫к ╫С╫Щ╫Ю╫Х╫к ╫Ф╫Ю╫й╫Щ╫Ч ╫Ь╫Ь╫Р ╫в╫Ь╫Х╫к ╫Щ╫Ч╫Щ╫У╫Х╫к, ╫С╫Р╫Ю╫ж╫в╫Х╫к "╫и╫Р╫Х╫Ш╫Щ╫а╫Т ╫Щ╫Ю╫Х╫к".

╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф ╫Ю╫з╫С╫Ь╫к ╫Р╫и╫Т╫Х╫Ю╫а╫Ш ╫Щ╫Ч╫Щ╫У - ╫б╫Ш╫и╫Щ╫а╫Т ╫й╫Ь ╫Ю╫б╫д╫и ╫Ю╫в╫и╫Ы╫к ╫С╫Щ╫Ю╫Х╫к ╫Ь╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф.

╫а╫Щ╫к╫Я ╫Т╫Э ╫Ь╫а╫к╫С ╫Р╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ю╫Ю╫в╫и╫Ы╫к ╫С╫й╫и╫к ╫Ф╫д╫и╫Щ╫Х╫Х╫Ш ╫Ь╫Ю╫в╫и╫Ы╫к ╫С╫й╫и╫к ╫Ф╫и╫Т╫Щ╫Ь ╫Х╫Ь╫Ф╫Щ╫д╫Ъ.

## `send(data)`

╫а╫Щ╫к╫Я ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫Ю╫к╫Х╫У╫Ф ╫Ц╫Х ╫Ы╫У╫Щ ╫Ь╫й╫Ь╫Х╫Ч ╫б╫Ш╫и╫Щ╫а╫Т ╫Ч╫Х╫д╫й╫Щ ╫Ь╫Ч╫Ь╫Х╫Ш╫Щ╫Я, ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫в╫С╫Х╫и ╫д╫Х╫а╫з╫ж╫Щ╫Х╫а╫Ь╫Щ╫Х╫к ╫й╫в╫У╫Щ╫Щ╫Я ╫Ь╫Р ╫а╫к╫Ю╫Ы╫к ╫С╫б╫д╫и╫Щ╫Щ╫Ф.

╫С╫Ю╫к╫Х╫У╫Ф ╫Ц╫Х ╫Щ╫й ╫Ь╫Ф╫в╫С╫Щ╫и ╫Р╫к ╫Ф╫б╫Ш╫и╫Щ╫а╫Т ╫С╫У╫Щ╫Х╫з ╫Ы╫д╫Щ ╫й╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫й╫Ф╫й╫и╫к ╫й╫Ь ╫Щ╫Ю╫Х╫к ╫Щ╫з╫С╫Ь ╫Р╫Х╫к╫Х, ╫Х╫Ф╫Х╫Р ╫Ь╫Р ╫в╫Х╫С╫и ╫Х╫Ь╫Щ╫У╫ж╫Щ╫Ф ╫Р╫Х ╫в╫Щ╫С╫Х╫У.

╫Ы╫У╫Щ ╫Ь╫Ф╫й╫к╫Ю╫й ╫Ь╫С╫з╫й╫к ╫Ю╫Щ╫У╫в - ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ю╫в╫С╫и ╫Ь╫б╫Ь╫Щ╫з╫к ╫Р╫й╫и╫Р╫Щ, ╫Щ╫й ╫Ь╫й╫Ь╫С ╫в╫Э ╫з╫и╫Щ╫Р╫Х╫к ╫Ь

```js
await call.blockRunningUntilNextRequest();
```

# `values`

╫Ю╫Ы╫Щ╫Ь ╫Р╫к ╫Ы╫Ь ╫Ф╫д╫и╫Ю╫Ш╫и╫Щ╫Э ╫й╫а╫й╫Ь╫Ч╫Х ╫Ю╫Щ╫Ю╫Х╫к -

╫Р╫Э ╫Ф╫С╫з╫й╫Ф ╫а╫й╫Ь╫Ч╫Ф ╫С-тАл`HTTP GET`, ╫Щ╫Ы╫Щ╫Ь ╫Р╫к ╫ФтАл`query string`,

╫Р╫Э ╫Ф╫С╫з╫й╫Ф ╫а╫й╫Ь╫Ч╫Ф ╫С-тАл`HTTP POST` тАл(`api_url_post=yes`), ╫Щ╫Ы╫Щ╫Ь ╫Р╫к ╫ФтАл`body`

# ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш `message`

╫Ы╫Ь ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш ╫Ф╫Х╫У╫в╫Ф ╫ж╫и╫Щ╫Ъ ╫Ь╫Ф╫Щ╫Х╫к ╫С╫Ю╫С╫а╫Ф ╫Ф╫С╫Р:

```js
{ type: string, data: string }
```

╫Ы╫Р╫й╫и `type` ╫Ф╫Х╫Р ╫б╫Х╫Т ╫Ф╫Х╫У╫в╫Ф ╫Ю╫к╫Х╫Ъ ╫Ф╫Ш╫С╫Ь╫Ф ╫й╫Ь╫Ф╫Ь╫Я, ╫Х`data` ╫Ф╫Х╫Р ╫Ф╫Ю╫Щ╫У╫в ╫в╫ж╫Ю╫Х - `string`,<br>
╫Ю╫Ь╫С╫У ╫Ы╫Р╫й╫и ╫Ф`type` ╫Ф╫Х╫Р `zmanim`/`music_on_hold`, ╫й╫Р╫Ц ╫Ф`data` ╫Щ╫Ф╫Щ╫Ф ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш  - ╫Ю╫д╫Х╫и╫Ш ╫Ю╫к╫Ч╫к ╫Ь╫Ш╫С╫Ь╫Ф:

- [zmanim](#╫Ю╫С╫а╫Ф-╫Фdata-╫Сzmanim)
- [music_on_hold](#╫Ю╫С╫а╫Ф-╫Фdata-╫С-music_on_hold)

**╫б╫Х╫Т╫Щ ╫Ф╫Х╫У╫в╫Х╫к ╫а╫к╫Ю╫Ы╫Щ╫Э:**

<div dir="rtl" text-align="right">

| ╫б╫Х╫Т              | ╫к╫Щ╫Р╫Х╫и ╫Ю╫з╫Х╫ж╫и                                                                            | ╫У╫Х╫Т╫Ю╫Ф                                                                  | ╫Ф╫в╫и╫Х╫к                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------------- | -------------------------------------------------------------------------------------- | ---------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `text`           | ╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш                                                                             | `╫У╫Х╫Т╫Ю╫Ф ╫Ь╫Ш╫з╫б╫Ш ╫У╫Х╫Т╫Ю╫Ф`                                                    | ╫й╫Щ╫Э ╫Ь╫С ╫Ь[╫Р╫Ц╫Ф╫и╫Ф ╫Ю╫к╫Ч╫к ╫Ь╫Ш╫С╫Ь╫Ф](#╫к╫Х╫Х╫Щ╫Э-╫Ь╫Р-╫Ч╫Х╫з╫Щ╫Щ╫Э-╫С╫Ф╫з╫и╫Р╫к-╫Ш╫з╫б╫Ш) ╫Ь╫Т╫С╫Щ ╫к╫Х╫Х╫Щ╫Э ╫й╫Ь╫Р ╫а╫Щ╫к╫Я ╫Ь╫Ф╫з╫и╫Щ╫Р                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `ai`           | ╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш ╫СAI                                                                             | `╫У╫Х╫Т╫Ю╫Ф ╫Ь╫Ш╫з╫б╫Ш ╫У╫Х╫Т╫Ю╫Ф`                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `file`           | ╫Ф╫й╫Ю╫в╫к ╫з╫Х╫С╫е ╫Р╫Х╫У╫Щ╫Х                                                                       | `/1/002`, ╫а╫Щ╫к╫Я ╫Ь╫Ы╫к╫Х╫С ╫и╫з ╫Р╫к ╫й╫Э ╫Ф╫з╫Х╫С╫е `002` ╫Р╫Э ╫Ф╫з╫Х╫С╫е ╫а╫Ю╫ж╫Р ╫С╫к╫з╫Щ╫Щ╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к | ╫Р╫Щ╫Я ╫Ь╫Ы╫к╫Х╫С ╫б╫Щ╫Х╫Ю╫к ╫з╫Х╫С╫е. [╫а╫Щ╫к╫Я ╫Ь╫Ф╫й╫Ю╫Щ╫в ╫Ю╫Ю╫Р╫Т╫и ╫Т╫Ь╫Х╫С╫Ь╫Щ](https://f2.freeivr.co.il/topic/56/%D7%9E%D7%95%D7%93%D7%95%D7%9C-api-%D7%AA%D7%A7%D7%A9%D7%95%D7%A8-%D7%A2%D7%9D-%D7%9E%D7%97%D7%A9%D7%91%D7%99%D7%9D-%D7%95%D7%9E%D7%9E%D7%A9%D7%A7%D7%99-%D7%A0%D7%AA%D7%95%D7%A0%D7%99%D7%9D-%D7%97%D7%99%D7%A6%D7%95%D7%A0%D7%99%D7%99%D7%9D/4?_=1682984503080#:~:text=%D7%94%D7%A9%D7%9E%D7%A2%D7%AA%20%D7%A7%D7%95%D7%91%D7%A5%20%D7%9E%D7%AA%D7%95%D7%9A%20%D7%9E%D7%90%D7%92%D7%A8%20%D7%92%D7%9C%D7%95%D7%91%D7%9C%D7%99). |
| `speech`         | ╫Ф╫з╫и╫Р╫Ф ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫й╫Ь ╫з╫Х╫С╫е TTS                                                             | ╫а╫к╫Щ╫С ╫Ь╫з╫Х╫С╫е TTS ╫Р╫Х ╫й╫Э ╫з╫Х╫С╫е TTS ╫С╫к╫з╫Щ╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к                            | ╫Ь╫Ь╫Р ╫Ф╫б╫Щ╫Х╫Ю╫к                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `digits`         | ╫Ф╫й╫Ю╫в╫к ╫б╫д╫и╫Х╫к                                                                            | `105` - ╫Щ╫й╫Ю╫Щ╫в "╫Р╫Ч╫к ╫Р╫д╫б ╫Ч╫Ю╫й"                                            | ╫й╫Щ╫Ю╫Х╫й╫Щ ╫С╫в╫Щ╫з╫и ╫Ь╫Ф╫з╫и╫Р╫к ╫Ю╫б╫д╫и ╫Ш╫Ь╫д╫Х╫Я                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `number`         | ╫Ф╫й╫Ю╫в╫к ╫Ю╫б╫д╫и                                                                             | `105` - ╫Щ╫й╫Ю╫Щ╫в "╫Ю╫Р╫Ф ╫Х╫Ч╫Ю╫й"                                               | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `alpha`          | ╫Ф╫й╫Ю╫в╫к ╫Р╫Х╫к╫Щ╫Х╫к ╫С╫Р╫а╫Т╫Ь╫Щ╫к                                                                   | `abc`, ╫Щ╫й╫Ю╫Щ╫в "╫Р╫Щ╫Щ, ╫С╫Щ, ╫б╫Щ"                                             | ╫Ь╫Р ╫к╫Х╫Ю╫Ъ ╫С╫в╫С╫и╫Щ╫к                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `zmanim`         | ╫Ф╫й╫Ю╫в╫к ╫й╫в╫Ф                                                                              | ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш. ╫д╫Щ╫и╫Х╫Ш ╫С╫а╫д╫и╫У ЁЯСЗ                                                 | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `system_message` | ╫Ф╫й╫Ю╫в╫к ╫Ф╫Х╫У╫в╫к ╫Ю╫в╫и╫Ы╫к                                                                      | `M1005` ╫Р╫Х `1005`                                                      | [╫и╫й╫Щ╫Ю╫к ╫Ф╫Х╫У╫в╫Х╫к ╫Ф╫Ю╫в╫и╫Ы╫к](https://f2.freeivr.co.il/post/3)                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `music_on_hold`  | ╫Ф╫й╫Ю╫в╫к ╫Ю╫Х╫Ц╫Щ╫з╫Ф ╫С╫Ф╫Ю╫к╫а╫Ф                                                                    | `{ musicName: 'ztomao', maxSec: 10 }`                                  | ╫Ф╫д╫и╫Ю╫Х╫и maxSec ╫и╫й╫Х╫к. ╫и╫Р╫Ф [╫Ы╫Р╫Я](https://f2.freeivr.co.il/topic/44/%D7%9E%D7%95%D7%96%D7%99%D7%A7%D7%94-%D7%91%D7%94%D7%9E%D7%AA%D7%A0%D7%94) ╫б╫Х╫Т╫Щ ╫Ю╫Х╫Ц╫Щ╫з╫Ф ╫Ц╫Ю╫Щ╫а╫Щ╫Э ╫Х╫Ф╫Х╫и╫Р╫Х╫к ╫Ь╫Щ╫ж╫Щ╫и╫к ╫Ч╫У╫й.                                                                                                                                                                                                                                                                                                                                    |
| `dateH`           | ╫Ф╫й╫Ю╫в╫к ╫к╫Р╫и╫Щ╫Ъ ╫в╫С╫и╫Щ                                                                       | ╫д╫Х╫и╫Ю╫Ш `DD/MM/YYYY` - 28/07/2022                                        | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `date`          | ╫Ф╫й╫Ю╫в╫к ╫к╫Р╫и╫Щ╫Ъ ╫Ь╫Х╫в╫Ц╫Щ                                                                      | ╫д╫Х╫и╫Ю╫Ш ╫к╫Р╫и╫Щ╫Ъ ╫Ь╫Х╫в╫Ц╫Щ `DD/MM/YYYY`, ╫Щ╫й╫Ю╫Щ╫в ╫Р╫к ╫Ф╫к╫Р╫и╫Щ╫Ъ ╫Ф╫в╫С╫и╫Щ ╫Ф╫Ю╫к╫Р╫Щ╫Э           | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `go_to_folder`   | ╫а╫к╫Щ╫С ╫Щ╫Ч╫б╫Щ ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к ╫Р╫Х ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫и╫Р╫й╫Щ╫к, ╫и╫Р╫Ф [╫Ы╫Р╫Я](https://f2.freeivr.co.il/post/58) | ╫Ф╫в╫С╫и╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Р╫Ч╫и╫к                                                | ╫Ь╫Р ╫Ю╫Х╫Ю╫Ь╫е, ╫в╫У╫Щ╫г ╫Ь╫Ф╫й╫к╫Ю╫й ╫С [`call.go_to_folder`](#go_to_folderpath). ╫Ь╫Р ╫а╫Щ╫к╫Я ╫Ь╫й╫и╫й╫и ╫Ф╫Х╫У╫в╫Х╫к ╫а╫Х╫б╫д╫Х╫к ╫Ь╫Р╫Ч╫и ╫б╫Х╫Т ╫Ц╫Ф.                                                                                                                                                                                                                                                                                                                                                                                                           |
</div>

### ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э ╫С╫Ф╫з╫и╫Р╫к ╫Ш╫з╫б╫Ш

тЪая╕П ╫й╫Щ╫Ю╫Х ╫Ь╫С! тЪая╕П

╫Ь╫Р ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Ч╫Ц╫Щ╫и ╫Ь╫Щ╫Ю╫Х╫к ╫Р╫к ╫Ф╫к╫Х╫Щ╫Э:

╫а╫з╫Х╫У╫Ф,╫Ю╫з╫г,╫Т╫и╫й,╫Т╫и╫й╫Щ╫Щ╫Э,&

╫Ф╫в╫С╫и╫к ╫Р╫Ч╫У ╫Ю╫Ф╫к╫Х╫Щ╫Э ╫Ф╫а"╫Ь ╫Щ╫Т╫и╫Х╫Э ╫Ь╫Ц╫и╫Щ╫з╫к ╫й╫Т╫Щ╫Р╫Ф, ╫Р╫Ь╫Р ╫Р╫Э ╫Ы╫Я ╫а╫Р╫д╫й╫и ╫Ф╫б╫и╫к ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э ╫й╫з╫Ш╫Ф:

**╫Ы╫Р╫й╫и ╫Ю╫в╫С╫Щ╫и╫Щ╫Э ╫Ш╫з╫б╫Ш ╫Ь╫Ф╫з╫и╫Р╫Ф (`'type: 'text`) ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫Ф╫б╫и╫Ф ╫й╫Ь ╫к╫Х╫Х╫Щ╫Э ╫Ь╫Р ╫Ч╫Х╫з╫Щ╫Щ╫Э**, ╫Ы╫Ь╫Х╫Ю╫и ╫й╫С╫Ю╫з╫Х╫Э ╫Ь╫Ц╫и╫Х╫з ╫й╫Т╫Щ╫Р╫Ф ╫Ф╫Э ╫д╫й╫Х╫Ш ╫Щ╫Х╫б╫и╫Х ╫Ю╫Ф╫к╫й╫Х╫С╫Ф ╫й╫к╫Х╫Ч╫Ц╫и ╫Ь╫Щ╫Ю╫Х╫к.

╫Ф╫Ф╫Т╫У╫и╫Ф ╫Ф╫Щ╫Р `removeInvalidChars`, ╫Р╫Х╫к╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫С╫й╫к╫Щ ╫и╫Ю╫Х╫к, ╫С╫и╫Ю╫к ╫Ф╫Х╫У╫в╫Ф ╫С╫Х╫У╫У╫к, ╫Р╫Х ╫С╫и╫Ю╫к ╫Ы╫Ь ╫Ф`read`/`id_list_message`.

╫У╫Х╫Т╫Ю╫Р╫Х╫к:

- ╫С╫и╫Ю╫к ╫Ф╫Ф╫Х╫У╫в╫Ф ╫Ф╫Ю╫б╫Х╫Щ╫Ю╫к - ╫Ф╫в╫С╫и╫к ╫Ф╫д╫и╫Ю╫Ш╫и `removeInvalidChars` ╫С╫Р╫Х╫С╫Щ╫Щ╫з╫Ш ╫Ф╫Ф╫Х╫У╫в╫Ф:

```js
{
  type: "text",
  data: "╫Ш╫з╫б╫Ш. ╫С╫в╫Щ╫Щ╫к╫Щ.",
  removeInvalidChars: true
}
```

- ╫С╫и╫Ю╫к ╫Ы╫Ь ╫Ф`read`/`id_list_message` - ╫Ф╫в╫С╫и╫к ╫Ф╫д╫и╫Ю╫Ш╫и `removeInvalidChars` ╫С╫Р╫Х╫С╫Щ╫Щ╫з╫Ш ╫Ф╫Р╫д╫й╫и╫Х╫Щ╫Х╫к.

╫У╫Х╫Т╫Ю╫Ф ╫Ь`read`:

```js
const resp = await call.read(messagesWidthInvalidChars, 'tap', { removeInvalidChars: true });
```

╫У╫Х╫Т╫Ю╫Ф ╫Ь`id_list_message`:

```js
call.id_list_message(messagesWidthInvalidChars, { removeInvalidChars: true });
```

### ╫Ю╫С╫а╫Ф ╫Фdata ╫С`zmanim`

```js
{
    time: string, // optional, default: "T" (current time)
    zone: string, // optional, default: "IL/Jerusalem",
    difference: string // optional, default: 0
};
```

#### ╫Ф╫в╫и╫Ъ `time`

╫б╫Х╫Т ╫Ф╫Ц╫Ю╫Я ╫й╫и╫Х╫ж╫Щ╫Э ╫Ь╫Ф╫й╫Ю╫Щ╫в.

╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: "`T`" = ╫Ф╫й╫в╫Ф ╫Ф╫а╫Х╫Ы╫Ч╫Щ╫к.
╫Ф╫й╫Ю╫в╫к ╫й╫в╫Ф - `THH:MM`,
╫Р╫Х ╫Ц╫Ю╫Я ╫Ф╫Ь╫Ы╫к╫Щ - ╫а╫Щ╫к╫Я ╫Ь╫и╫Р╫Х╫к [╫Ы╫Р╫Я](https://f2.freeivr.co.il/post/82875) ╫Р╫к ╫и╫й╫Щ╫Ю╫к ╫Ф╫Ц╫Ю╫а╫Щ╫Э ╫й╫а╫Щ╫к╫Я ╫Ь╫Ч╫й╫С ╫Ю╫Ф╫Э ╫Ц╫Ю╫Я.

#### ╫Ф╫в╫и╫Ъ `zone`

╫Р╫Ц╫Х╫и ╫Ф╫Ц╫Ю╫Я ╫й╫в╫С╫Х╫и╫Х ╫Щ╫й ╫Ь╫Ч╫й╫С ╫Р╫к ╫Ф╫Ц╫Ю╫а╫Щ╫Э.

╫С╫и╫Щ╫и╫к ╫Ю╫Ч╫У╫Ь: `IL/Jerusalem`.

╫а╫Щ╫к╫Я ╫Ь╫и╫Р╫Х╫к [╫Ы╫Р╫Я](https://f2.freeivr.co.il/post/82868) ╫Р╫к ╫и╫й╫Щ╫Ю╫к ╫Р╫Ц╫Х╫и╫Щ ╫Ф╫Ц╫Ю╫Я ╫Ф╫з╫Щ╫Щ╫Ю╫Щ╫Э ╫С╫Ю╫в╫и╫Ы╫к.

#### ╫Ф╫в╫и╫Ъ `difference`

╫в╫и╫Ъ ╫Ц╫Ф ╫Ю╫й╫Ю╫й ╫Ь╫Ф╫Х╫б╫д╫Ф/╫Ф╫б╫и╫Ф ╫Ю╫Ь╫Р╫Ы╫Х╫к╫Щ╫к ╫й╫Ь ╫Ц╫Ю╫Я ╫в╫Ь ╫Ф╫Ц╫Ю╫Я ╫й╫Ю╫й╫Ю╫Щ╫в╫Щ╫Э.

╫С╫Р╫Э ╫Ь╫Р ╫Щ╫Х╫в╫С╫и ╫д╫и╫Ю╫Ш╫и ╫Ц╫Ф, ╫Щ╫Х╫й╫Ю╫в ╫Ф╫Ц╫Ю╫Я ╫Ь╫Ь╫Р ╫й╫Щ╫а╫Х╫Щ.

╫Ф╫в╫и╫Ъ **`difference`** ╫Ю╫Ы╫Щ╫Ь ╫з╫Х╫У╫Э ╫Р╫к ╫б╫Х╫Т ╫Ф╫д╫в╫Х╫Ь╫Ф - ╫д╫Ь╫Х╫б (+) ╫Ь╫Ф╫Х╫б╫д╫к ╫Ц╫Ю╫Я, ╫Р╫Х ╫Ю╫Щ╫а╫Х╫б (-) ╫Ь╫Ф╫д╫Ч╫к╫к ╫Ц╫Ю╫Я, ╫Х╫Р╫Ц ╫Р╫к ╫Ф╫Ц╫Ю╫Я ╫в╫Ь ╫д╫Щ ╫Ф╫ж╫Х╫и╫Ф ╫Ф╫С╫Р╫Ф: Y - ╫й╫а╫Ф M - ╫Ч╫Х╫У╫й D - ╫Щ╫Х╫Э H - ╫й╫в╫Ф m - ╫У╫з╫Ф S - ╫й╫а╫Щ╫Ф s - ╫Р╫Ь╫д╫Щ╫к ╫й╫а╫Щ╫Ф ╫Ь╫Ю╫й╫Ь, ╫в╫С╫Х╫и 20 ╫У╫з╫Х╫к ╫Р╫Ч╫Х╫и╫Ф ╫Щ╫й ╫Ь╫Ф╫Т╫У╫Щ╫и `m20-`, ╫в╫С╫Х╫и 3 ╫й╫в╫Х╫к ╫з╫У╫Щ╫Ю╫Ф ╫Щ╫й ╫Ь╫и╫й╫Х╫Э `H3+`. ╫в╫С╫Х╫и ╫Щ╫Х╫Ю╫Щ╫Щ╫Э ╫Р╫Ч╫Х╫и╫Ф ╫Щ╫й ╫Ь╫и╫й╫Х╫Э `D1-`.

╫Ь╫У╫Х╫Т╫Ю╫Ф, ╫в╫С╫Х╫и ╫Ф╫й╫Ю╫в╫к ╫Ц╫Ю╫Я ╫й╫з╫Щ╫в╫к ╫Ф╫Ч╫Ю╫Ф ╫Ю╫Ч╫и ╫С╫в╫Щ╫и ╫С╫а╫Щ ╫С╫и╫з:

```js
const messages = [{
    type: 'zmanim',
    data: {
        time: 'sunset',
        zone: 'IL/Bney_Brak',
        difference: '+1D'
    }
}];
```

### ╫Ю╫С╫а╫Ф ╫Фdata ╫С-**music_on_hold**

```js
{
    musicName: string,
    maxSec: number // optional
};
```

[╫Ы╫Р╫Я](https://f2.freeivr.co.il/topic/44/%D7%9E%D7%95%D7%96%D7%99%D7%A7%D7%94-%D7%91%D7%94%D7%9E%D7%AA%D7%A0%D7%94) ╫б╫Х╫Т╫Щ ╫Ю╫Х╫Ц╫Щ╫з╫Ф ╫Ц╫Ю╫Щ╫а╫Щ╫Э ╫Х╫Ф╫Х╫и╫Р╫Х╫к ╫Ь╫Щ╫ж╫Щ╫и╫к ╫Ч╫У╫й╫Ф.

# ╫С╫и╫Щ╫и╫Х╫к ╫Ю╫Ч╫У╫Ь

-------------
**╫й╫Щ╫Ю╫Х ╫Ь╫С:**

╫Р╫д╫й╫и╫Х╫к ╫Ц╫Х ╫Ц╫Ю╫Щ╫а╫Ф ╫С╫Т╫и╫б╫Ф 6.0 ╫Х╫Ю╫в╫Ь╫Ф

╫Р╫д╫й╫и╫Х╫к ╫Ц╫Х ╫Ф╫Щ╫а╫Ф ╫Р╫Х╫д╫ж╫Щ╫Х╫а╫Ь╫Щ╫к ╫Ь╫Ч╫Ь╫Х╫Ш╫Щ╫Я, ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Ю╫й╫Щ╫Ъ ╫Ь╫Ф╫в╫С╫Щ╫и ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш ╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫С╫Ы╫Ь `read`/`id_list_message` ╫Ы╫Ю╫Х ╫з╫Х╫У╫Э

-------------

╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫С╫и╫Щ╫и╫Х╫к ╫Ю╫Ч╫У╫Ь ╫С╫У╫и╫Ы╫Щ╫Э ╫Ф╫С╫Р╫Х╫к:

- ╫С╫и╫Щ╫и╫Х╫к ╫Ю╫Ч╫У╫Ь ╫й╫Ь ╫Ф╫Ю╫в╫и╫Ы╫к - ╫й╫Ф╫Я ╫Ы╫Ю╫Х ╫С╫и╫Щ╫и╫Х╫к ╫Ф╫Ю╫Ч╫У╫Ь ╫й╫Ь ╫Щ╫Ю╫Х╫к ([defaults.js](lib/defaults.js))
- ╫и╫Ю╫к ╫и╫Р╫Х╫Ш╫и
- ╫и╫Ю╫к ╫й╫Щ╫Ч╫Ф
- ╫б╫д╫ж╫Щ╫д╫Щ╫к ╫Ь╫з╫и╫Щ╫Р╫к `read`/`id_list_message` ╫Ю╫б╫Х╫Щ╫Щ╫Ю╫к

╫Ф╫Р╫д╫й╫и╫Х╫Щ╫Х╫к ╫Щ╫Ю╫Х╫Ц╫Т╫Х ╫в╫Э ╫б╫У╫и ╫з╫У╫Щ╫Ю╫Х╫Щ╫Х╫к. ╫Ф╫б╫У╫и ╫Ф╫Х╫Р:
╫С╫и╫Щ╫и╫Х╫к ╫Ф╫Ю╫Ч╫У╫Ь ╫й╫Ь ╫Ф╫б╫д╫и╫Щ╫Щ╫Ф ╫й╫а╫Ю╫ж╫Р╫к ╫С- [lib/defaults.js](lib/defaults.js),
╫С╫и╫Ю╫к ╫Ю╫Х╫д╫в ╫и╫Р╫Х╫Ш╫и,
╫С╫и╫Ю╫к ╫Ю╫Х╫д╫в ╫й╫Щ╫Ч╫Ф,
╫С╫и╫Ю╫к ╫з╫и╫Щ╫Р╫Ф ╫б╫д╫ж╫Щ╫д╫Щ╫к.

╫Ы╫Ь ╫Р╫д╫й╫и╫Х╫к ╫Ю╫з╫С╫Ь╫к ╫з╫У╫Щ╫Ю╫Х╫к ╫Х╫У╫Х╫и╫б╫к ╫Р╫к ╫Ц╫Х ╫й╫Ь╫д╫а╫Щ╫Ф.

╫У╫Х╫Т╫Ю╫Ф:

```js
const router = YemotRouter({
    printLog: true,
    defaults: {
        removeInvalidChars: true,
        read: {
            timeout: 30000
        }
    }
});

// ╫Р╫д╫й╫и ╫Т╫Э ╫Ы╫Ъ:
// router.defaults.read.timeout = 30000;

router.get('/', async (call) => {
    // ╫Фtimeout ╫Щ╫Ф╫Щ╫Ф 30 ╫й╫а╫Щ╫Х╫к
    await call.read([{ type: 'text', data: '╫Ф╫Щ╫Щ, ╫к╫з╫Щ╫й 1' }], 'tap', {
        max_digits: 1,
        digits_allowed: [1]
    });

    // ╫Фtimeout ╫Щ╫Ф╫Щ╫Ф 40 ╫й╫а╫Щ╫Х╫к
    call.defaults.read.timeout = 40000;
    await call.read([{ type: 'text', data: '╫Ф╫Щ╫Щ, ╫к╫з╫Щ╫й 1' }], 'tap', {
        max_digits: 1,
        digits_allowed: [1]
    });

    // ╫Фtimeout ╫Щ╫Ф╫Щ╫Ф 60 ╫й╫а╫Щ╫Х╫к
    await call.read([{ type: 'text', data: '╫Ф╫Щ╫Щ, ╫к╫з╫Щ╫й 1' }], 'tap', {
        max_digits: 1,
        digits_allowed: [1],
        timeout: 60000
    });
});
```

╫С╫У╫Х╫Т╫Ю╫Ф ╫Ю╫Р╫к╫Ч╫Ь╫Щ╫Э ╫Р╫к ╫Ф╫и╫Р╫Х╫Ш╫и ╫в╫Э ╫Ф╫Т╫У╫и╫Ф ╫й╫Ь timeout ╫й╫Ь 1000 ╫й╫а╫Щ╫Х╫к,
╫Ь╫Р╫Ч╫и ╫Ю╫Ы╫Я ╫С╫к╫Х╫Ъ ╫Ф╫й╫Щ╫Ч╫Ф ╫Ю╫й╫а╫Щ╫Э ╫Р╫Х╫к╫Х ╫Ь2000,
╫Х╫Ь╫Р╫Ч╫и ╫Ю╫Ы╫Я ╫Ю╫С╫ж╫в╫Щ╫Э ╫з╫и╫Щ╫Р╫Ф ╫С╫Х╫У╫У╫к ╫в╫Э ╫Р╫Х╫С╫Щ╫Щ╫з╫Ш ╫Р╫Х╫д╫ж╫Щ╫Х╫к ╫в╫Э timeout ╫й╫Ь 3000, ╫Х╫Ф╫Х╫Р ╫Т╫Х╫С╫и ╫в╫Ь ╫Ф╫Ф╫Т╫У╫и╫Х╫к ╫Ф╫з╫Х╫У╫Ю╫Х╫к ╫й╫Ф╫Щ╫Х ╫С╫и╫Ю╫Ф ╫Щ╫Х╫к╫и ╫Т╫С╫Х╫Ф╫Ф.

**╫й╫Щ╫Ю╫Х ╫Ь╫С!** ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Т╫У╫Щ╫и ╫Р╫к ╫Ф╫Р╫Х╫д╫ж╫Щ╫Х╫к ╫Ф╫С╫Р╫Х╫к ╫С╫и╫Ю╫к ╫з╫и╫Щ╫Р╫Ф ╫С╫Х╫У╫У╫к ╫С╫Ь╫С╫У ╫Х╫Ь╫Р ╫С╫и╫Ю╫к ╫й╫Щ╫Ч╫Ф/╫и╫Р╫Х╫Ш╫и:

- `val_name` (`read`)
- `prependToNextAction` (`id_list_message`)

# Events

╫а╫Щ╫к╫Я ╫Ь╫Ф╫Р╫Ц╫Щ╫Я ╫Ь╫Р╫Щ╫и╫Х╫в╫Щ╫Э ╫С╫и╫Ю╫к ╫и╫Р╫Х╫Ш╫и ╫в╫Ь ╫Щ╫У╫Щ ╫Ф╫Р╫Ц╫а╫Ф ╫Ь`router.events`:

- `new_call` - ╫Ы╫Р╫й╫и ╫й╫Щ╫Ч╫Ф ╫Ч╫У╫й╫Ф ╫а╫Ы╫а╫б╫к ╫Ь╫Ю╫в╫и╫Ы╫к
- `call_continue` - ╫Ф╫к╫з╫С╫Ь╫Ф ╫к╫й╫Х╫С╫Ф ╫Ь╫з╫и╫Щ╫Р╫к read
- `call_hangup` - тАл╫Ы╫Р╫й╫и ╫й╫Щ╫Ч╫Ф ╫Ю╫а╫Х╫к╫з╫к ╫в╫Ь ╫Щ╫У╫Щ ╫Ф╫Ю╫Ч╫Щ╫Щ╫Т (╫Ф╫к╫з╫С╫Ь╫Ф ╫С╫з╫й╫Ф ╫в╫Э `hangup=yes`)

╫й╫Щ╫Ю╫Х╫й╫Щ ╫Ь╫У╫Х╫Т╫Ю╫Ф ╫Ы╫У╫Щ ╫Ь╫Ш╫д╫Ь ╫С╫з╫и╫Щ╫Р╫Х╫к ╫в╫Э `hangup=yes` ╫Т╫Э ╫Ю╫Ч╫Х╫е ╫Ь╫й╫Ь╫Х╫Ч╫Ф.

# TypeScript

╫Ф╫в╫и╫Х╫к ╫Ь╫й╫Щ╫Ю╫Х╫й ╫С╫б╫д╫и╫Щ╫Ф ╫в╫Э ╫Ш╫Щ╫Щ╫д╫б╫з╫и╫Щ╫д╫Ш:

## тАП`app.use(router)`

╫С╫й╫Щ╫Ю╫Х╫й ╫С╫и╫Р╫Х╫Ш╫и ╫в╫Э ╫Р╫з╫б╫д╫и╫б -
```ts
const router = YemotRouter()
app.use(router)
```
╫к╫Х╫ж╫Т ╫й╫Т╫Щ╫Р╫к ╫Ш╫Щ╫Щ╫д. ╫Ф╫д╫Щ╫к╫и╫Х╫Я ╫Ы╫и╫Т╫в:
```ts
const { Router } = require('express')
const router = YemotRouter()
app.use(router.asExpressRouter)
```

## ╫Ф╫Т╫У╫и╫к тАП`empty_val` ╫й╫Р╫Щ╫а╫Х ╫Ю╫б╫Х╫Т string

╫Ы╫и╫Т╫в ╫ФDTS ╫Ь╫Р ╫Ю╫Х╫Т╫У╫и ╫Ь╫Ф╫б╫Щ╫з ╫Р╫к ╫Ф╫Ш╫Щ╫Щ╫д ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к, ╫Х╫Щ╫й ╫Ь╫Ф╫Т╫У╫Щ╫и ╫Р╫Х╫к╫Х ╫Щ╫У╫а╫Щ╫к ╫в╫Э `as`, ╫У╫Х╫Т╫Ю╫Ф:
```ts
const res = await call.read([{ type: 'text', data: 'please type one' }], 'tap', {
    allow_empty: true,
    empty_val: null,
}) as string | null;
```

# ╫а╫б╫д╫Ч: ╫Ю╫з╫и╫Щ ╫з╫ж╫Ф - ╫Ь╫Ю╫а╫Х╫б╫Щ╫Э ╫С╫й╫Щ╫Ю╫Х╫й ╫С╫б╫д╫и╫Щ╫Ф

## ╫Ф╫и╫ж╫к ╫з╫Х╫У ╫Ь╫Р╫Ч╫и ╫Ф╫Ч╫Ц╫и╫к ╫к╫й╫Х╫С╫Ф ╫Ь╫Ю╫Ч╫Щ╫Щ╫Т

**тЪая╕П ╫й╫Щ╫Ю╫Х ╫Ь╫С - ╫з╫Ш╫в ╫Ц╫Ф ╫Ю╫Х╫и╫Ы╫С ╫Ю╫в╫Ш ╫Ь╫Ф╫С╫а╫Ф, ╫Х╫а╫ж╫и╫Ъ ╫и╫з ╫Р╫Э ╫Ю╫в╫Х╫а╫Щ╫Щ╫а╫Щ╫Э ╫Ь╫Ф╫Ч╫Ц╫Щ╫и ╫к╫й╫Х╫С╫Ф ╫Ь╫Ю╫Ч╫Щ╫Щ╫С ╫Х╫Ь╫к╫к ╫Ь╫Х ╫Ь╫ж╫Р╫к ╫Ю╫Ф╫й╫Ь╫Х╫Ч╫Ф (`id_list_message`), ╫Х╫Ь╫Р╫Ч╫и ╫Ю╫Ы╫Я ╫Ь╫Ф╫и╫Щ╫е ╫з╫Х╫У "╫Ы╫С╫У", ╫Х╫Ь╫Р ╫а╫ж╫и╫Ы╫к ╫Р╫Э ╫а╫Х╫к╫а╫Щ╫Э ╫Ь╫Ю╫Р╫Ц╫Щ╫Я ╫Ь╫Ф╫Ю╫к╫Щ╫Я ╫Ь╫Р╫Щ╫й╫Х╫и ╫С╫Щ╫ж╫Х╫в ╫Ф╫д╫в╫Х╫Ь╫Ф (╫С╫Р╫Ю╫ж╫в╫Х╫к `read`).**

╫С╫в╫к ╫Ф╫Ч╫Ц╫и╫к ╫к╫й╫Х╫С╫Ф ╫й╫Р╫Щ╫а╫Ф `read` ╫Х╫Ь╫Р ╫Т╫Х╫и╫Ю╫к ╫Ь╫й╫и╫к ╫й╫Ь ╫Щ╫Ю╫Х╫к ╫Ь╫Ч╫Ц╫Х╫и ╫Ь╫и╫Р╫Х╫Ш╫и - `id_list_message` ╫Р╫Х `go_to_folder`,
╫а╫Ц╫и╫з╫к ╫й╫Т╫Щ╫Р╫Ф ╫в╫Ь ╫Щ╫У╫Щ ╫Ф╫б╫д╫и╫Щ╫Ф - ╫й╫к╫Х╫д╫б╫к ╫Р╫Х╫к╫Ф ╫С╫Ч╫Ц╫и╫Ф ╫С╫и╫Ю╫Ф ╫Щ╫Х╫к╫и ╫Т╫С╫Х╫Ф╫Ф, ╫Х╫Ы╫Ъ ╫и╫Щ╫ж╫к ╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф ╫а╫Ф╫и╫Т╫к ╫Ы╫У╫Щ ╫Ь╫Ч╫б╫Х╫Ъ ╫С╫Ц╫Щ╫Ы╫и╫Х╫Я
╫Х╫Ы╫Я ╫Ь╫а╫з╫Х╫к ╫Р╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ю╫Ф`activeCalls` - ╫Ы╫У╫Щ ╫й╫С╫Ы╫а╫Щ╫б╫Ф ╫Ч╫Х╫Ц╫и╫к ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф ╫к╫и╫Х╫е ╫Ю╫Ф╫Ф╫к╫Ч╫Ь╫Ф ╫Х╫Ь╫Р ╫к╫Ю╫й╫Щ╫Ъ.

╫Ь╫Ы╫Я ╫Р╫Э ╫Ю╫а╫б╫Щ╫Э ╫Ь╫Ф╫Ч╫Ц╫Щ╫и ╫к╫й╫Х╫С╫Ф ╫Ь╫Ю╫й╫к╫Ю╫й ╫Х╫Ь╫Р╫Ч╫и ╫Ю╫Ы╫Я ╫Ь╫Ф╫и╫Щ╫е ╫Р╫к ╫Ф╫з╫Х╫У ╫Ф"╫Ы╫С╫У" ╫Ы╫Ю╫Х ╫й╫в╫Х╫й╫Щ╫Э ╫С╫й╫и╫к nodejs + express ╫и╫Т╫Щ╫Ь, ╫Ь╫У╫Х╫Т╫Ю╫Ф:

```js
function runBigJob(req, res) {
    res.status(202).send('ok, we got your request, we will send you an email when the job is done')
    doBigJob()
}
```

╫Р╫Х ╫С╫Ю╫з╫и╫Ф ╫й╫Ь ╫Ф╫и╫Р╫Х╫Ш╫и - ╫з╫Х╫У (**╫й╫Т╫Х╫Щ**) ╫Ы╫Ц╫Ф:

```js
async function runBigJob(call) {
    call.id_list_message([{
        type: 'text',
        data: '╫С╫б╫У╫и, ╫С╫з╫й╫к╫Ъ ╫к╫Ш╫Х╫д╫Ь ╫С╫Ф╫з╫У╫Э'
    }])
    await doBigJob()
}
```

╫з╫Х╫У ╫Ы╫Ц╫Ф ╫Ь╫Р ╫Щ╫в╫С╫Х╫У ╫Ы╫Щ╫Х╫Х╫Я ╫й╫Ф╫з╫и╫Щ╫Р╫Ф ╫Ь`call.id_list_messsage` ╫Ц╫Х╫и╫з╫к ╫й╫Т╫Щ╫Р╫Ф ╫й╫Ф╫Х╫и╫Т╫к ╫Р╫к ╫и╫Щ╫ж╫к ╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф, ╫Х╫Ь╫Ы╫Я ╫Ф╫з╫Х╫У ╫й╫Ь╫Р╫Ч╫и╫Щ╫Ф ╫Ь╫Р ╫Щ╫и╫Х╫е.

╫Ы╫У╫Щ ╫Ь╫Ф╫и╫Щ╫е ╫з╫Х╫У ╫Ь╫Р╫Ч╫и ╫Ф╫Ч╫Ц╫и╫к ╫Ф╫к╫й╫Х╫С╫Ф, ╫Щ╫й ╫Ь╫к╫д╫Х╫б ╫Р╫к ╫Ф╫й╫Т╫Щ╫Р╫Ф ╫й╫а╫Ц╫и╫з╫к (╫С╫Ю╫з╫и╫Ф ╫й╫Ф╫Щ╫Р ╫й╫Т╫Щ╫Р╫к `ExitError` ╫д╫а╫Щ╫Ю╫Щ╫к ╫Ы╫а"╫Ь):

```js
import { ExitError } from 'yemot-router2';
async function runBigJob (call) {
    try {
        call.id_list_message([{
            type: 'text',
            data: '╫С╫б╫У╫и, ╫С╫з╫й╫к╫Ъ ╫к╫Ш╫Х╫д╫Ь ╫С╫Ф╫з╫У╫Э'
        }]);
    } catch (error) {
        if (error.isExitError) return;
        throw error;
    };
    await doBigJob();
}
```

### ╫Ю╫Ч╫Щ╫з╫Ф ╫Щ╫У╫а╫Щ╫к ╫й╫Ь ╫Ф╫й╫Щ╫Ч╫Ф ╫Ю╫Ф`activeCalls`

╫Р╫Щ╫Я ╫ж╫Х╫и╫Ъ ╫Ь╫Ц╫и╫Х╫з ╫Щ╫У╫а╫Щ╫к ╫Р╫к `ExitError` ╫Ы╫У╫Щ ╫Ь╫Ю╫Ч╫Х╫з ╫Р╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ю╫ФactiveCalls, ╫Ы╫Щ╫Х╫Х╫Я ╫й╫Ф╫Щ╫Р ╫а╫Ю╫Ч╫з╫к ╫Р╫Х╫Ш╫Х╫Ю╫Ш╫Щ╫к ╫в╫Ь ╫Щ╫У╫Щ ╫Ф╫б╫д╫и╫Щ╫Ф ╫С╫б╫Щ╫Х╫Э ╫Ф╫и╫Щ╫ж╫Ф ╫й╫Ь ╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф.<br>
╫в╫Э ╫Ц╫Р╫к, ╫С╫Р╫Э ╫Ф╫з╫Х╫У ╫Ф╫а╫Х╫б╫г ╫Ф╫Ю╫Х╫и╫е ╫Р╫Ю╫Х╫и ╫Ь╫з╫Ч╫к ╫Ц╫Ю╫Я, ╫Ю╫Х╫Ю╫Ь╫е ╫Ь╫а╫з╫Х╫к ╫Щ╫У╫а╫Щ╫к ╫С╫Р╫Х╫д╫Я ╫Ю╫Щ╫Щ╫У╫Щ (╫Ю╫Щ╫Щ╫У ╫Ь╫Р╫Ч╫и ╫Ф╫Ч╫Ц╫и╫к ╫Ф╫к╫й╫Х╫С╫Ф ╫С`id_list_message`) ╫Р╫к ╫Ф╫й╫Щ╫Ч╫Ф ╫Ю╫ФactiveCalls - ╫Р╫Ч╫и╫к ╫Ь╫Р ╫Щ╫Ф╫Щ╫Ф ╫а╫Щ╫к╫Я ╫Ь╫Ф╫Щ╫Ы╫а╫б ╫Ь╫й╫Ь╫Х╫Ч╫Ф ╫в╫У ╫Ь╫б╫Щ╫Х╫Э ╫С╫Щ╫ж╫Х╫в ╫Ф╫д╫в╫Х╫Ь╫Ф ╫Ф╫Ы╫С╫У╫Ф:

```js
const router = YemotRouter({ printLog: true });
router.get('/', async (call) => {
    try {
        call.id_list_message([{
            type: 'text',
            data: '╫С╫б╫У╫и, ╫С╫з╫й╫к╫Ъ ╫к╫Ш╫Х╫д╫Ь ╫С╫Ф╫з╫У╫Э'
        }]);
    } catch (error) {
        if (error.isExitError) return;
        throw error;
    };
    router.deleteCall(call.callId);
    await doBigJob();
});
```

## ╫У╫и╫Ъ ╫а╫Х╫б╫д╫к ╫Ь╫Ф╫и╫ж╫к ╫з╫Х╫У ╫Ы╫С╫У

╫Р╫Х╫д╫ж╫Щ╫Ф ╫а╫Х╫б╫д╫к ╫Ф╫Щ╫Р ╫Ь╫Ф╫и╫Щ╫е ╫Р╫к ╫Ф╫з╫Х╫У ╫С╫ж╫Х╫и╫Ф ╫Ю╫а╫Х╫к╫з╫к ╫Ю╫Ф╫д╫Х╫а╫з╫ж╫Щ╫Ф, ╫Ы╫Ь╫Х╫Ю╫и ╫з╫и╫Щ╫Р╫Ф ╫Ь╫з╫Х╫У ╫Ф"╫Ы╫С╫У" ╫С╫к╫Х╫Ъ ╫д╫Х╫а╫з╫ж╫Щ╫Щ╫Ф ╫Р╫а╫Х╫а╫Щ╫Ю╫Щ╫к **╫Ь╫д╫а╫Щ** ╫Ф╫Ч╫Ц╫и╫к ╫Ф╫к╫й╫Х╫С╫Ф:

```js
(() => {
    await doBigJob();
})();
call.id_list_message(...);
```

# ╫к╫Ы╫Х╫а╫Х╫к ╫а╫Х╫б╫д╫Х╫к

## ╫й╫Щ╫Ю╫Х╫й ╫С-TTS (╫Ф╫Ю╫и╫к ╫Ш╫з╫б╫Ш ╫Ь╫У╫Щ╫С╫Х╫и)

╫Ф╫б╫д╫и╫Щ╫Ф ╫к╫Х╫Ю╫Ы╫к ╫С╫Ф╫Ю╫и╫к ╫Ш╫з╫б╫Ш ╫Ь╫У╫Щ╫С╫Х╫и ╫С╫Р╫Ю╫ж╫в╫Х╫к ╫й╫Щ╫и╫Х╫к Narakeet API. ╫а╫Щ╫к╫Я ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫к╫Ы╫Х╫а╫Ф ╫Ц╫Х ╫С╫Р╫Ю╫ж╫в╫Х╫к ╫Ф╫Х╫б╫д╫к ╫Ф╫Х╫У╫в╫Ф ╫Ю╫б╫Х╫Т 'file' ╫Х╫Ф╫к╫Ч╫Ь╫к ╫Ф╫Ш╫з╫б╫Ш ╫С-'tn-':

```js
// ╫У╫Х╫Т╫Ю╫Ф ╫Ь╫й╫Щ╫Ю╫Х╫й ╫С-TTS
await call.read([
    { type: 'text', data: '╫Ф╫а╫Ф ╫У╫Х╫Т╫Ю╫Ф ╫Ь╫Ф╫Ю╫и╫к ╫Ш╫з╫б╫Ш ╫Ь╫У╫Щ╫С╫Х╫и:' },
    { type: 'file', data: 'tn-╫й╫Ь╫Х╫Э ╫Х╫С╫и╫Х╫Ы╫Щ╫Э ╫Ф╫С╫Р╫Щ╫Э ╫Ь╫Ю╫в╫и╫Ы╫к ╫Ф╫Ш╫Ь╫д╫Х╫а╫Щ╫к ╫й╫Ь╫а╫Х' }
], 'tap');
```

╫С╫У╫Х╫Т╫Ю╫Ф ╫Ц╫Х, ╫Ф╫Ш╫з╫б╫Ш "╫й╫Ь╫Х╫Э ╫Х╫С╫и╫Х╫Ы╫Щ╫Э ╫Ф╫С╫Р╫Щ╫Э ╫Ь╫Ю╫в╫и╫Ы╫к ╫Ф╫Ш╫Ь╫д╫Х╫а╫Щ╫к ╫й╫Ь╫а╫Х" ╫Щ╫Х╫Ю╫и ╫Ь╫з╫Х╫Ь ╫С╫Р╫Ю╫ж╫в╫Х╫к ╫й╫Щ╫и╫Х╫к ╫Ф-TTS ╫Х╫Щ╫Щ╫й╫Ю╫и ╫С╫а╫к╫Щ╫С 'ivr/1'. 
╫Ф╫Ю╫в╫и╫Ы╫к ╫к╫Ч╫Ь╫Щ╫г ╫Р╫к 'tn-╫й╫Ь╫Х╫Э ╫Х╫С╫и╫Х╫Ы╫Щ╫Э ╫Ф╫С╫Р╫Щ╫Э ╫Ь╫Ю╫в╫и╫Ы╫к ╫Ф╫Ш╫Ь╫д╫Х╫а╫Щ╫к ╫й╫Ь╫а╫Х' ╫С╫а╫к╫Щ╫С ╫Ф╫з╫Х╫С╫е ╫й╫а╫Х╫ж╫и (╫Ь╫У╫Х╫Т╫Ю╫Ф: 'F-/ivr/1/12345.mp3').

╫а╫Щ╫к╫Я ╫Ь╫Ф╫й╫к╫Ю╫й ╫С╫д╫Х╫а╫з╫ж╫Щ╫Ф ╫Т╫Э ╫С╫Ю╫з╫Х╫Ю╫Х╫к ╫Р╫Ч╫и╫Щ╫Э ╫й╫С╫Ф╫Э ╫а╫У╫и╫й ╫Ь╫Ф╫й╫Ю╫Щ╫в ╫з╫Х╫С╫е ╫з╫Х╫Ь╫Щ, ╫Ь╫Ю╫й╫Ь:

```js
await call.id_list_message([
    { type: 'file', data: 'tn-╫к╫Х╫У╫Ф ╫в╫Ь ╫д╫а╫Щ╫Щ╫к╫Ъ, ╫Ф╫д╫а╫Щ╫Щ╫Ф ╫Ф╫к╫з╫С╫Ь╫Ф ╫С╫Ю╫в╫и╫Ы╫к' }
]);
```
